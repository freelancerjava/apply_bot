{"ast":null,"code":"import _objectSpread from \"/home/ubuntu/projects/mynetwork/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/home/ubuntu/projects/mynetwork/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _extends from \"/home/ubuntu/projects/mynetwork/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/extends\";\nvar _jsxFileName = \"/home/ubuntu/projects/mynetwork/src/features/records/Records.js\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nimport React, { useEffect, useState } from 'react';\nimport { Field, Form } from 'react-final-form';\nimport { useMutation, useQuery } from 'react-query';\nimport { Button, Card, CardBody, CardFooter, CardHeader, Col, Container, Form as RForm, FormGroup, Input, InputGroup, Row, Table } from 'reactstrap';\nimport arrayMutators from 'final-form-arrays';\nimport { FieldArray } from 'react-final-form-arrays';\nimport { createRecord, getUtilsByGq } from './query';\nimport moment from 'moment';\nexport default function Records(_ref) {\n  var _this = this;\n\n  var props = _extends({}, _ref);\n\n  var _useMutation = useMutation(createRecord, {\n    onSuccess: function onSuccess() {}\n  }),\n      _useMutation2 = _slicedToArray(_useMutation, 2),\n      recordMut = _useMutation2[0],\n      recordMutRes = _useMutation2[1];\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      srcs = _useState2[0],\n      setsrc = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      devices = _useState4[0],\n      setdevices = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      records = _useState6[0],\n      setrecords = _useState6[1]; // const srcsdata = useQuery(\"srcs\", getSrcByGq)\n  // const devicedata = useQuery(\"devices\", getDeviceByGq)\n\n\n  var utils = useQuery(['utils', {\n    date: moment(new Date()).format(\"YYYY-MM-DD\")\n  }], getUtilsByGq);\n  console.log(\"query\", {\n    date: moment(new Date()).format(\"YYYY-MM-DD\")\n  });\n  console.log(utils);\n  var user = JSON.parse(localStorage.getItem('user'));\n  useEffect(function () {\n    var cancel = false;\n\n    if (!cancel) {\n      if (utils.data && utils.data.srcObjects != null) {\n        setsrc(utils.data.srcObjects);\n      } else {\n        setsrc([]);\n      }\n\n      if (utils.data && utils.data.devices != null) {\n        setdevices(utils.data.devices);\n      } else {\n        setdevices([]);\n      }\n\n      if (utils.data && utils.data.records != null) {\n        setrecords(utils.data.records.map(function (item) {\n          return {\n            id: item.id,\n            src_object: item.src_object.id,\n            device: item.device.id,\n            count: item.count,\n            give_data: item.give_data,\n            give_k: item.give_k,\n            give_skk: item.give_skk,\n            command: item.command && item.command.id || user.command.id,\n            date: item.date || new Date()\n          };\n        }));\n      } else {\n        setrecords([]);\n      }\n    } else {\n      cancel = true;\n    }\n  }, [utils.data, user.command.id]);\n\n  var onSubmit = function onSubmit(data) {\n    // let temp = { ...data }\n    // temp.command = user.command.id\n    recordMut({\n      data: data,\n      records: records\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(Form, Object.assign({\n    onSubmit: onSubmit,\n    mutators: _objectSpread({}, arrayMutators),\n    initialValues: {\n      records: records\n    },\n    render: function render(_ref2) {\n      var handleSubmit = _ref2.handleSubmit,\n          submitError = _ref2.submitError,\n          values = _ref2.values,\n          form = _ref2.form;\n      return /*#__PURE__*/React.createElement(RForm, {\n        onSubmit: handleSubmit,\n        className: \"form\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 9\n        }\n      }, submitError && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-red text-center\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 27\n        }\n      }, submitError), /*#__PURE__*/React.createElement(Card, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(CardHeader, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }\n      }, \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u0437\\u0430\\u043F\\u0438\\u0441\\u0435\\u0439\"), /*#__PURE__*/React.createElement(CardBody, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(FieldArray, {\n        name: \"records\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 15\n        }\n      }, function (_ref3) {\n        var fields = _ref3.fields;\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 19\n          }\n        }, /*#__PURE__*/React.createElement(Table, {\n          className: \"align-items-center table-flush\",\n          responsive: true,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(\"thead\", {\n          className: \"thead-light\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 23\n          }\n        }, /*#__PURE__*/React.createElement(\"tr\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(\"th\", {\n          scope: \"col\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 27\n          }\n        }, \"\\u0420\\u0430\\u0437\\u0432\\u0435\\u0434\\u044B\\u0432\\u0430\\u0435\\u043C\\u044B\\u0435 \\u043E\\u0431\\u044A\\u0435\\u043A\\u0442\\u044B\"), /*#__PURE__*/React.createElement(\"th\", {\n          scope: \"col\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 27\n          }\n        }, \"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \", /*#__PURE__*/React.createElement(\"br\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 54\n          }\n        }), \" \\u043F\\u0435\\u0440\\u0435\\u0445\\u0432\\u0430\\u0447\\u0435\\u043D\\u043D\\u044B\\u0445 \", /*#__PURE__*/React.createElement(\"br\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 75\n          }\n        }), \" \\u0440\\u0430\\u0437\\u0432\\u0435\\u0434\\u0434\\u0430\\u043D\\u043D\\u044B\\u0445\"), /*#__PURE__*/React.createElement(\"th\", {\n          scope: \"col\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 27\n          }\n        }, \"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \", /*#__PURE__*/React.createElement(\"br\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 54\n          }\n        }), \" \\u043F\\u0440\\u0435\\u0434\\u0441\\u0442\\u0430\\u0432\\u043B\\u0435\\u043D\\u043D\\u044B\\u0445 \", /*#__PURE__*/React.createElement(\"br\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 76\n          }\n        }), \" \\u0441\\u0432\\u0435\\u0434\\u0435\\u043D\\u0438\\u0439\"), /*#__PURE__*/React.createElement(\"th\", {\n          scope: \"col\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 27\n          }\n        }, \"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \", /*#__PURE__*/React.createElement(\"br\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 54\n          }\n        }), \" \\u043F\\u0440\\u0435\\u0434\\u0441\\u0442\\u0430\\u0432\\u043B\\u0435\\u043D\\u043D\\u044B\\u0445 \", /*#__PURE__*/React.createElement(\"br\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 76\n          }\n        }), \" \\u043A\\u0440\\u0438\\u043F\\u0442.\"), /*#__PURE__*/React.createElement(\"th\", {\n          scope: \"col\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 27\n          }\n        }, \"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \", /*#__PURE__*/React.createElement(\"br\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 54\n          }\n        }), \" \\u043F\\u0440\\u0435\\u0434\\u0441\\u0442\\u0430\\u0432\\u043B\\u0435\\u043D\\u043D\\u044B\\u0445 \", /*#__PURE__*/React.createElement(\"br\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 76\n          }\n        }), \" \\u0441\\u043A\\u043A\"), /*#__PURE__*/React.createElement(\"th\", {\n          scope: \"col\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 27\n          }\n        }, \"\\u0421\\u0440\\u0435\\u0434\\u0441\\u0442\\u0432\\u0430 \\u043F\\u0435\\u0440\\u0435\\u0445\\u0432\\u0430\\u0442\\u0430\"), /*#__PURE__*/React.createElement(\"th\", {\n          scope: \"col\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 27\n          }\n        }))), /*#__PURE__*/React.createElement(\"tbody\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 23\n          }\n        }, fields.map(function (name, index) {\n          return /*#__PURE__*/React.createElement(\"tr\", {\n            className: \"row-transition\",\n            key: name,\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 27\n            }\n          }, /*#__PURE__*/React.createElement(\"td\", {\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 29\n            }\n          }, /*#__PURE__*/React.createElement(FormGroup, {\n            className: \"mr-2 mt-2 mb-2\",\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 31\n            }\n          }, /*#__PURE__*/React.createElement(InputGroup, {\n            className: \"input-group-alternative\",\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 33\n            }\n          }, /*#__PURE__*/React.createElement(Field, {\n            name: \"\".concat(name, \".src_object\"),\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 35\n            }\n          }, function (props) {\n            return /*#__PURE__*/React.createElement(Input, {\n              type: \"select\",\n              name: props.input.name,\n              value: props.input.value,\n              onChange: props.input.onChange,\n              __self: _this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 120,\n                columnNumber: 39\n              }\n            }, /*#__PURE__*/React.createElement(\"option\", {\n              __self: _this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 124,\n                columnNumber: 41\n              }\n            }), srcs.map(function (item, key) {\n              return /*#__PURE__*/React.createElement(\"option\", {\n                value: item.id,\n                __self: _this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 126,\n                  columnNumber: 50\n                }\n              }, item.name);\n            }));\n          })))), /*#__PURE__*/React.createElement(\"td\", {\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 29\n            }\n          }, /*#__PURE__*/React.createElement(FormGroup, {\n            className: \"m-2\",\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 31\n            }\n          }, /*#__PURE__*/React.createElement(InputGroup, {\n            className: \"input-group-alternative\",\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 33\n            }\n          }, /*#__PURE__*/React.createElement(Field, {\n            name: \"\".concat(name, \".count\"),\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 35\n            }\n          }, function (props) {\n            return /*#__PURE__*/React.createElement(Input, {\n              placeholder: \"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \\u043F\\u0435\\u0440\\u0435\\u0445\\u0432\\u0430\\u0442\\u0430\",\n              type: \"number\",\n              name: props.input.name,\n              value: props.input.value,\n              onChange: props.input.onChange,\n              __self: _this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 139,\n                columnNumber: 39\n              }\n            });\n          })))), /*#__PURE__*/React.createElement(\"td\", {\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 29\n            }\n          }, /*#__PURE__*/React.createElement(FormGroup, {\n            className: \"m-2\",\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 31\n            }\n          }, /*#__PURE__*/React.createElement(InputGroup, {\n            className: \"input-group-alternative\",\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 33\n            }\n          }, /*#__PURE__*/React.createElement(Field, {\n            name: \"\".concat(name, \".give_data\"),\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 35\n            }\n          }, function (props) {\n            return /*#__PURE__*/React.createElement(Input, {\n              placeholder: \"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \\u043F\\u0440\\u0435\\u0434\\u0441\\u0442\\u0430\\u0432\\u043B\\u0435\\u043D\\u043D\\u044B\\u0445 \\u0441\\u0432\\u0435\\u0434\\u0435\\u043D\\u0438\\u0439\",\n              type: \"number\",\n              name: props.input.name,\n              value: props.input.value,\n              onChange: props.input.onChange,\n              __self: _this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 154,\n                columnNumber: 39\n              }\n            });\n          })))), /*#__PURE__*/React.createElement(\"td\", {\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 29\n            }\n          }, /*#__PURE__*/React.createElement(FormGroup, {\n            className: \"m-2\",\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 31\n            }\n          }, /*#__PURE__*/React.createElement(InputGroup, {\n            className: \"input-group-alternative\",\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 33\n            }\n          }, /*#__PURE__*/React.createElement(Field, {\n            name: \"\".concat(name, \".give_k\"),\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 35\n            }\n          }, function (props) {\n            return /*#__PURE__*/React.createElement(Input, {\n              placeholder: \"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \\u043F\\u0440\\u0435\\u0434\\u0441\\u0442\\u0430\\u0432\\u043B\\u0435\\u043D\\u043D\\u044B\\u0445 \\u043A\\u0440\\u0438\\u043F\\u0442.\",\n              type: \"number\",\n              name: props.input.name,\n              value: props.input.value,\n              onChange: props.input.onChange,\n              __self: _this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 169,\n                columnNumber: 39\n              }\n            });\n          })))), /*#__PURE__*/React.createElement(\"td\", {\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 29\n            }\n          }, /*#__PURE__*/React.createElement(FormGroup, {\n            className: \"m-2\",\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 31\n            }\n          }, /*#__PURE__*/React.createElement(InputGroup, {\n            className: \"input-group-alternative\",\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 33\n            }\n          }, /*#__PURE__*/React.createElement(Field, {\n            name: \"\".concat(name, \".give_skk\"),\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 35\n            }\n          }, function (props) {\n            return /*#__PURE__*/React.createElement(Input, {\n              placeholder: \"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \\u043F\\u0440\\u0435\\u0434\\u0441\\u0442\\u0430\\u0432\\u043B\\u0435\\u043D\\u043D\\u044B\\u0445 \\u0441\\u043A\\u043A\",\n              type: \"number\",\n              name: props.input.name,\n              value: props.input.value,\n              onChange: props.input.onChange,\n              __self: _this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 39\n              }\n            });\n          })))), /*#__PURE__*/React.createElement(\"td\", {\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 29\n            }\n          }, /*#__PURE__*/React.createElement(FormGroup, {\n            className: \"m-2\",\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 31\n            }\n          }, /*#__PURE__*/React.createElement(InputGroup, {\n            className: \"input-group-alternative\",\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 33\n            }\n          }, /*#__PURE__*/React.createElement(Field, {\n            name: \"\".concat(name, \".device\"),\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 35\n            }\n          }, function (props) {\n            return /*#__PURE__*/React.createElement(Input, {\n              type: \"select\",\n              name: props.input.name,\n              value: props.input.value,\n              onChange: props.input.onChange,\n              __self: _this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 199,\n                columnNumber: 39\n              }\n            }, /*#__PURE__*/React.createElement(\"option\", {\n              __self: _this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 203,\n                columnNumber: 41\n              }\n            }), devices.map(function (item, key) {\n              return /*#__PURE__*/React.createElement(\"option\", {\n                value: item.id,\n                __self: _this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 205,\n                  columnNumber: 50\n                }\n              }, item.name);\n            }));\n          })))), /*#__PURE__*/React.createElement(\"td\", {\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 29\n            }\n          }, /*#__PURE__*/React.createElement(Button, {\n            color: \"danger\",\n            onClick: function onClick() {\n              return fields.remove(index);\n            },\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 31\n            }\n          }, \"\\u0423\\u0431\\u0440\\u0430\\u0442\\u044C\")));\n        }))), /*#__PURE__*/React.createElement(Button, {\n          block: true,\n          color: \"success\",\n          onClick: function onClick() {\n            return fields.push({});\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 21\n          }\n        }, \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\"), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"array-field-row\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(Button, {\n          block: true,\n          color: \"secondary\",\n          onClick: form.reset,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 23\n          }\n        }, \"\\u0421\\u0431\\u0440\\u043E\\u0441\\u0438\\u0442\\u044C\"), /*#__PURE__*/React.createElement(Button, {\n          block: true,\n          color: \"primary\",\n          onClick: function onClick() {\n            return handleSubmit(values);\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 23\n          }\n        }, \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\")));\n      }))));\n    }\n  }, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 5\n    }\n  }));\n}\n\n__signature__(Records, \"useMutation{[recordMut, recordMutRes]}\\nuseState{[srcs, setsrc]([])}\\nuseState{[devices, setdevices]([])}\\nuseState{[records, setrecords]([])}\\nuseQuery{utils}\\nuseEffect{}\", function () {\n  return [useMutation, useQuery];\n});\n\n;\nRecords.propTypes = {};\nRecords.defaultProps = {};\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(Records, \"Records\", \"/home/ubuntu/projects/mynetwork/src/features/records/Records.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/home/ubuntu/projects/mynetwork/src/features/records/Records.js"],"names":["React","useEffect","useState","Field","Form","useMutation","useQuery","Button","Card","CardBody","CardFooter","CardHeader","Col","Container","RForm","FormGroup","Input","InputGroup","Row","Table","arrayMutators","FieldArray","createRecord","getUtilsByGq","moment","Records","props","onSuccess","recordMut","recordMutRes","srcs","setsrc","devices","setdevices","records","setrecords","utils","date","Date","format","console","log","user","JSON","parse","localStorage","getItem","cancel","data","srcObjects","map","item","id","src_object","device","count","give_data","give_k","give_skk","command","onSubmit","handleSubmit","submitError","values","form","fields","name","index","input","value","onChange","key","remove","push","reset","propTypes","defaultProps"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Field, Form } from 'react-final-form';\nimport { useMutation, useQuery } from 'react-query';\nimport { Button, Card, CardBody, CardFooter, CardHeader, Col, Container, Form as RForm, FormGroup, Input, InputGroup, Row, Table } from 'reactstrap';\nimport arrayMutators from 'final-form-arrays'\nimport { FieldArray } from 'react-final-form-arrays'\nimport { createRecord, getUtilsByGq } from './query';\nimport moment from 'moment'\n\nexport default function Records({ ...props }) {\n  const [recordMut, recordMutRes] = useMutation(createRecord, {\n    onSuccess: () => {\n\n    }\n  })\n\n  const [srcs, setsrc] = useState([])\n  const [devices, setdevices] = useState([])\n  const [records, setrecords] = useState([])\n\n  // const srcsdata = useQuery(\"srcs\", getSrcByGq)\n  // const devicedata = useQuery(\"devices\", getDeviceByGq)\n  const utils = useQuery(['utils', { date: moment(new Date()).format(\"YYYY-MM-DD\") }], getUtilsByGq)\n  console.log(\"query\", { date: moment(new Date()).format(\"YYYY-MM-DD\") });\n\n\n  console.log(utils);\n\n  const user = JSON.parse(localStorage.getItem('user'))\n\n\n\n  useEffect(() => {\n    let cancel = false\n\n    if (!cancel) {\n      if (utils.data && utils.data.srcObjects != null) {\n        setsrc(utils.data.srcObjects)\n      } else {\n        setsrc([])\n      }\n\n      if (utils.data && utils.data.devices != null) {\n        setdevices(utils.data.devices)\n      } else {\n        setdevices([])\n      }\n\n      if (utils.data && utils.data.records != null) {\n        setrecords(utils.data.records.map(item => {\n          return {\n            id: item.id,\n            src_object: item.src_object.id,\n            device: item.device.id,\n            count: item.count,\n            give_data: item.give_data,\n            give_k: item.give_k,\n            give_skk: item.give_skk,\n            command: item.command && item.command.id || user.command.id,\n            date: item.date || new Date()\n          }\n        }))\n      } else {\n        setrecords([])\n      }\n    } else {\n      cancel = true\n    }\n\n\n  }, [utils.data, user.command.id])\n\n  const onSubmit = (data) => {\n    // let temp = { ...data }\n    // temp.command = user.command.id\n    recordMut({ data: data, records: records })\n  }\n  return (\n    <Form\n      onSubmit={onSubmit}\n      mutators={{\n        // potentially other mutators could be merged here\n        ...arrayMutators\n      }}\n\n      initialValues={{\n        records: records\n      }}\n      render={({ handleSubmit, submitError, values, form }) => (\n        <RForm onSubmit={handleSubmit} className=\"form\">\n          {submitError && <div className=\"text-red text-center\">{submitError}</div>}\n\n          <Card>\n            <CardHeader>Добавление записей</CardHeader>\n            <CardBody>\n\n              <FieldArray name=\"records\">\n                {({ fields }) => (\n                  <div>\n                    <Table className=\"align-items-center table-flush\" responsive>\n                      <thead className=\"thead-light\">\n                        <tr>\n                          <th scope=\"col\">Разведываемые объекты</th>\n                          <th scope=\"col\">Количество <br /> перехваченных <br /> разведданных</th>\n                          <th scope=\"col\">Количество <br /> представленных <br /> сведений</th>\n                          <th scope=\"col\">Количество <br /> представленных <br /> крипт.</th>\n                          <th scope=\"col\">Количество <br /> представленных <br /> скк</th>\n                          <th scope=\"col\">Средства перехвата</th>\n                          <th scope=\"col\" />\n                        </tr>\n                      </thead>\n                      <tbody>\n                        {fields.map((name, index) => (\n                          <tr className=\"row-transition\" key={name}>\n                            <td>\n                              <FormGroup className=\"mr-2 mt-2 mb-2\">\n                                <InputGroup className=\"input-group-alternative\">\n                                  <Field name={`${name}.src_object`}>\n                                    {props => (\n                                      <Input type=\"select\"\n                                        name={props.input.name}\n                                        value={props.input.value}\n                                        onChange={props.input.onChange}>\n                                        <option />\n                                        {srcs.map((item, key) => {\n                                          return <option value={item.id}>{item.name}</option>\n                                        })}\n                                      </Input>\n                                    )}\n                                  </Field>\n                                </InputGroup>\n                              </FormGroup>\n                            </td>\n                            <td>\n                              <FormGroup className=\"m-2\">\n                                <InputGroup className=\"input-group-alternative\">\n                                  <Field name={`${name}.count`}>\n                                    {props => (\n                                      <Input placeholder=\"Количество перехвата\" type=\"number\"\n                                        name={props.input.name}\n                                        value={props.input.value}\n                                        onChange={props.input.onChange}\n                                      />\n                                    )}\n                                  </Field>\n                                </InputGroup>\n                              </FormGroup>\n                            </td>\n                            <td>\n                              <FormGroup className=\"m-2\">\n                                <InputGroup className=\"input-group-alternative\">\n                                  <Field name={`${name}.give_data`}>\n                                    {props => (\n                                      <Input placeholder=\"Количество представленных сведений\" type=\"number\"\n                                        name={props.input.name}\n                                        value={props.input.value}\n                                        onChange={props.input.onChange}\n                                      />\n                                    )}\n                                  </Field>\n                                </InputGroup>\n                              </FormGroup>\n                            </td>\n                            <td>\n                              <FormGroup className=\"m-2\">\n                                <InputGroup className=\"input-group-alternative\">\n                                  <Field name={`${name}.give_k`}>\n                                    {props => (\n                                      <Input placeholder=\"Количество представленных крипт.\" type=\"number\"\n                                        name={props.input.name}\n                                        value={props.input.value}\n                                        onChange={props.input.onChange}\n                                      />\n                                    )}\n                                  </Field>\n                                </InputGroup>\n                              </FormGroup>\n                            </td>\n                            <td>\n                              <FormGroup className=\"m-2\">\n                                <InputGroup className=\"input-group-alternative\">\n                                  <Field name={`${name}.give_skk`}>\n                                    {props => (\n                                      <Input placeholder=\"Количество представленных скк\" type=\"number\"\n                                        name={props.input.name}\n                                        value={props.input.value}\n                                        onChange={props.input.onChange}\n                                      />\n                                    )}\n                                  </Field>\n                                </InputGroup>\n                              </FormGroup>\n                            </td>\n                            <td>\n                              <FormGroup className=\"m-2\">\n                                <InputGroup className=\"input-group-alternative\">\n                                  <Field name={`${name}.device`}>\n                                    {props => (\n                                      <Input type=\"select\"\n                                        name={props.input.name}\n                                        value={props.input.value}\n                                        onChange={props.input.onChange}>\n                                        <option />\n                                        {devices.map((item, key) => {\n                                          return <option value={item.id}>{item.name}</option>\n                                        })}\n                                      </Input>\n                                    )}\n                                  </Field>\n                                </InputGroup>\n                              </FormGroup>\n                            </td>\n                            <td>\n                              <Button color=\"danger\" onClick={() => fields.remove(index)}>Убрать</Button>\n                            </td>\n                          </tr>\n                        ))}\n                      </tbody>\n                    </Table>\n                    <Button\n                      block\n                      color=\"success\"\n                      onClick={() => fields.push({})}\n                    >Добавить</Button>\n                    <div className=\"array-field-row\">\n                      <Button\n                        block\n                        color=\"secondary\"\n                        onClick={form.reset}\n                      >Сбросить</Button>\n                      <Button\n                        block\n                        color=\"primary\"\n                        onClick={() => handleSubmit(values)}\n                      >Сохранить</Button>\n                    </div>\n\n\n                  </div>\n                )}\n              </FieldArray>\n            </CardBody>\n          </Card>\n\n\n\n        </RForm>)}\n      {...props}\n    />\n  );\n};\n\nRecords.propTypes = {};\nRecords.defaultProps = {};\n"]},"metadata":{},"sourceType":"module"}