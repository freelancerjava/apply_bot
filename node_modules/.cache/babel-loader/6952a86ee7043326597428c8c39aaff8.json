{"ast":null,"code":"import _slicedToArray from \"/home/ubuntu/projects/dashboard-template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/ubuntu/projects/dashboard-template/src/features/otryad/views/examples/logs/index.js\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nimport React, { useEffect, useState } from 'react';\nimport { useMutation, useQuery } from 'react-query';\nimport { Link } from 'react-router-dom';\nimport { Button, Card, CardHeader, Col, Container, Modal, ModalBody, ModalFooter, ModalHeader, Progress, Row, Table } from 'reactstrap';\nimport Header from '../../../components/Headers/Header';\nimport { getLogsByGq } from '../../../query/logs';\nimport LogForm from './LogForm';\nimport { LogRow } from './LogRow';\nimport LogRowHead from './LogRowHead';\nimport './style.less';\nimport moment from 'moment';\n\nvar Logs = function Logs() {\n  var ltu = localStorage.getItem('user');\n\n  var _useState = useState(JSON.parse(ltu) || {}),\n      _useState2 = _slicedToArray(_useState, 2),\n      user = _useState2[0],\n      setuser = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      logs = _useState4[0],\n      setlogs = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      editingLogId = _useState6[0],\n      seteditingLogId = _useState6[1];\n\n  var logdata = useQuery([\"logs\", {\n    date: moment().format(\"YYYY-MM-DD\"),\n    id: user.command.id\n  }], getLogsByGq); // console.log(logdata);\n\n  useEffect(function () {\n    if (logdata.data && logdata.data.logs != null) {\n      setlogs(logdata.data.logs);\n    } else {\n      setlogs([]);\n    }\n  }, [logdata.data]);\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      newLogModalOpen = _useState8[0],\n      setnewLogModalOpen = _useState8[1];\n\n  var _useState9 = useState(true),\n      _useState10 = _slicedToArray(_useState9, 2),\n      newLog = _useState10[0],\n      setnewLog = _useState10[1];\n\n  var newLogToggle = function newLogToggle(index) {\n    seteditingLogId(index);\n    setnewLogModalOpen(!newLogModalOpen);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Header, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(Container, {\n    className: \"mt--7\",\n    fluid: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    className: \"shadow\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(CardHeader, {\n    className: \"border-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    className: \"align-items-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"mb-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 19\n    }\n  }, \"\\u0421\\u0443\\u0442\\u043E\\u0447\\u043D\\u044B\\u0435 \\u043E\\u0442\\u0447\\u0435\\u0442\\u044B\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col text-right\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    color: \"primary\",\n    href: \"#pablo\",\n    onClick: function onClick(e) {\n      return e.preventDefault();\n    },\n    size: \"sm\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 19\n    }\n  }, \"\\u041F\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440\\u0435\\u0442\\u044C \\u0432\\u0441\\u0435\"), /*#__PURE__*/React.createElement(Button, {\n    color: \"info\",\n    href: \"#pablo\",\n    onClick: function onClick(e) {\n      e.preventDefault();\n      setnewLogModalOpen(true);\n      seteditingLogId(null);\n    },\n    size: \"sm\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 19\n    }\n  }, \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"scrolling-div\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    className: \"align-items-center table-flush \",\n    responsive: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(LogRowHead, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 17\n    }\n  }, logs && logs.map(function (item, index) {\n    return /*#__PURE__*/React.createElement(LogRow, {\n      onClick: function onClick() {\n        newLogToggle(index);\n      },\n      item: item,\n      index: index,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 28\n      }\n    });\n  })))), /*#__PURE__*/React.createElement(Modal, {\n    isOpen: newLogModalOpen,\n    toggle: newLogToggle,\n    className: \"modal-lg\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(ModalHeader, {\n    toggle: newLogToggle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 15\n    }\n  }, \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043C\\u0430\\u043D\\u0435\\u0432\\u0440\\u0435\\u043D\\u043D\\u043E\\u0435 \\u043F\\u043E\\u0434\\u0440\\u0430\\u0437\\u0434\\u0435\\u043B\\u0435\\u043D\\u0438\\u0435\"), /*#__PURE__*/React.createElement(ModalBody, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(LogForm, {\n    editingLogId: editingLogId,\n    user: user,\n    log: logs[editingLogId],\n    logdata: logdata,\n    newLogToggle: newLogToggle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 17\n    }\n  }))))))));\n};\n\n__signature__(Logs, \"useState{[user, setuser](JSON.parse(ltu) || {})}\\nuseState{[logs, setlogs]([])}\\nuseState{[editingLogId, seteditingLogId](null)}\\nuseQuery{logdata}\\nuseEffect{}\\nuseState{[newLogModalOpen, setnewLogModalOpen](false)}\\nuseState{[newLog, setnewLog](true)}\", function () {\n  return [useQuery];\n});\n\nvar _default = Logs;\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(Logs, \"Logs\", \"/home/ubuntu/projects/dashboard-template/src/features/otryad/views/examples/logs/index.js\");\n  reactHotLoader.register(_default, \"default\", \"/home/ubuntu/projects/dashboard-template/src/features/otryad/views/examples/logs/index.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/home/ubuntu/projects/dashboard-template/src/features/otryad/views/examples/logs/index.js"],"names":["React","useEffect","useState","useMutation","useQuery","Link","Button","Card","CardHeader","Col","Container","Modal","ModalBody","ModalFooter","ModalHeader","Progress","Row","Table","Header","getLogsByGq","LogForm","LogRow","LogRowHead","moment","Logs","ltu","localStorage","getItem","JSON","parse","user","setuser","logs","setlogs","editingLogId","seteditingLogId","logdata","date","format","id","command","data","newLogModalOpen","setnewLogModalOpen","newLog","setnewLog","newLogToggle","index","e","preventDefault","map","item"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useMutation, useQuery } from 'react-query';\nimport { Link } from 'react-router-dom'\nimport { Button, Card, CardHeader, Col, Container, Modal, ModalBody, ModalFooter, ModalHeader, Progress, Row, Table } from 'reactstrap';\nimport Header from '../../../components/Headers/Header';\nimport { getLogsByGq } from '../../../query/logs';\nimport LogForm from './LogForm';\nimport { LogRow } from './LogRow';\nimport LogRowHead from './LogRowHead';\nimport './style.less'\nimport moment from 'moment'\n\nconst Logs = () => {\n\n  const ltu = localStorage.getItem('user');\n  const [user, setuser] = useState(JSON.parse(ltu) || {})\n  const [logs, setlogs] = useState([])\n  const [editingLogId, seteditingLogId] = useState(null)\n\n  const logdata = useQuery([\"logs\", { date: moment().format(\"YYYY-MM-DD\"), id: user.command.id }], getLogsByGq)\n  // console.log(logdata);\n\n  useEffect(() => {\n    if (logdata.data && logdata.data.logs != null) {\n      setlogs(logdata.data.logs)\n    } else {\n      setlogs([])\n    }\n  }, [logdata.data]);\n\n\n\n  const [newLogModalOpen, setnewLogModalOpen] = useState(false)\n  const [newLog, setnewLog] = useState(true)\n\n  const newLogToggle = (index) => {\n    seteditingLogId(index)\n    setnewLogModalOpen(!newLogModalOpen)\n  }\n\n  return <>\n\n    <Header />\n    <Container className=\"mt--7\" fluid>\n      <Row>\n        <Col>\n          <Card className=\"shadow\">\n            <CardHeader className=\"border-0\">\n              <Row className=\"align-items-center\">\n                <div className=\"col\">\n                  <h3 className=\"mb-0\">Суточные отчеты</h3>\n                </div>\n                <div className=\"col text-right\">\n                  <Button\n                    color=\"primary\"\n                    href=\"#pablo\"\n                    onClick={e => e.preventDefault()}\n                    size=\"sm\"\n                  >Посмотреть все</Button>\n\n                  <Button\n                    color=\"info\"\n                    href=\"#pablo\"\n                    onClick={e => { e.preventDefault(); setnewLogModalOpen(true); seteditingLogId(null) }}\n                    size=\"sm\"\n                  >Добавить</Button>\n                </div>\n              </Row>\n            </CardHeader>\n\n            <div className=\"scrolling-div\">\n              <Table className=\"align-items-center table-flush \" responsive>\n                <LogRowHead />\n                <tbody>\n                  {logs && logs.map((item, index) => {\n                    return <LogRow onClick={() => { newLogToggle(index) }} item={item} index={index} />\n                  })}\n                </tbody>\n              </Table>\n            </div>\n\n            <Modal isOpen={newLogModalOpen} toggle={newLogToggle} className=\"modal-lg\">\n              <ModalHeader toggle={newLogToggle}>Добавить маневренное подразделение</ModalHeader>\n              <ModalBody>\n                <LogForm editingLogId={editingLogId} user={user} log={logs[editingLogId]} logdata={logdata} newLogToggle={newLogToggle} />\n              </ModalBody>\n            </Modal>\n          </Card>\n        </Col>\n\n      </Row>\n    </Container>\n\n  </>\n}\n\nexport default Logs"]},"metadata":{},"sourceType":"module"}