{"ast":null,"code":"import _objectSpread from \"/home/ubuntu/projects/dashboard-template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/home/ubuntu/projects/dashboard-template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"/home/ubuntu/projects/dashboard-template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _jsxFileName = \"/home/ubuntu/projects/dashboard-template/src/features/logs/LogForm.js\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nimport React, { useEffect, useState } from 'react';\nimport { Field, Form } from 'react-final-form';\nimport { Button, Col, FormGroup, Input, InputGroup, InputGroupAddon, InputGroupText, Row } from 'reactstrap';\nimport moment from 'moment';\nimport { addDays } from 'date-fns';\nimport DatePicker from \"react-datepicker\";\nimport MapInput from '../../extrafunc/MapInput';\nimport { useMutation, useQuery } from 'react-query';\nimport { createLog } from './query';\n\nfunction LogForm(_ref) {\n  var _this = this;\n\n  var editingLogId = _ref.editingLogId,\n      user = _ref.user,\n      log = _ref.log,\n      logdata = _ref.logdata,\n      newLogToggle = _ref.newLogToggle,\n      props = _objectWithoutProperties(_ref, [\"editingLogId\", \"user\", \"log\", \"logdata\", \"newLogToggle\"]);\n\n  var _useMutation = useMutation(createLog, {\n    onSuccess: function onSuccess() {\n      logdata.refetch();\n    }\n  }),\n      _useMutation2 = _slicedToArray(_useMutation, 2),\n      logMut = _useMutation2[0],\n      logMutRes = _useMutation2[1];\n\n  var onSubmit = function onSubmit(data) {\n    var temp = _objectSpread({}, data);\n\n    temp.date = moment().format(\"YYYY-MM-DD\");\n    temp.command = user.command.id;\n    logMut(temp); // console.log(temp);\n    // console.log(repMutRes);\n\n    newLogToggle();\n  };\n\n  return /*#__PURE__*/React.createElement(Form, Object.assign({\n    onSubmit: onSubmit,\n    initialValues: _objectSpread({}, log, {\n      start: new Date(),\n      end: new Date(),\n      position: log && log.position || {\n        name: null,\n        pos: {\n          lat: null,\n          lng: null\n        }\n      }\n    }),\n    render: function render(_ref2) {\n      var handleSubmit = _ref2.handleSubmit,\n          submitError = _ref2.submitError,\n          values = _ref2.values,\n          form = _ref2.form;\n      return /*#__PURE__*/React.createElement(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"form\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 9\n        }\n      }, submitError && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-red text-center\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 27\n        }\n      }, submitError), /*#__PURE__*/React.createElement(Row, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(FormGroup, {\n        className: \"mb-3\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(InputGroup, {\n        className: \"input-group-alternative\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Field, {\n        name: \"head\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 19\n        }\n      }, function (props) {\n        return /*#__PURE__*/React.createElement(Input, {\n          placeholder: \"\\u0421\\u0442\\u0430\\u0440\\u0448\\u0438\\u0439 \\u0433\\u0440\\u0443\\u043F\\u043F\\u044B\",\n          type: \"text\",\n          name: props.input.name,\n          value: props.input.value,\n          onChange: props.input.onChange,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 23\n          }\n        });\n      }))), /*#__PURE__*/React.createElement(FormGroup, {\n        className: \"mb-3\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(InputGroup, {\n        className: \"input-group-alternative\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Field, {\n        name: \"count_ls\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 19\n        }\n      }, function (props) {\n        return /*#__PURE__*/React.createElement(Input, {\n          placeholder: \"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \\u043B/\\u0441\",\n          type: \"number\",\n          name: props.input.name,\n          value: props.input.value,\n          onChange: props.input.onChange,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 23\n          }\n        });\n      })))), /*#__PURE__*/React.createElement(Col, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(FormGroup, {\n        className: \"mb-3\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(InputGroup, {\n        className: \"input-group-alternative\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Field, {\n        name: \"start\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 19\n        }\n      }, function (props) {\n        return /*#__PURE__*/React.createElement(DatePicker, {\n          name: props.input.name,\n          value: props.input.value,\n          onChange: props.input.onChange,\n          selected: props.input.value,\n          dateFormat: \"dd-MM-yyyy\",\n          minDate: addDays(new Date(moment().format('MMM DD, YYYYY')), 0),\n          customInput: /*#__PURE__*/React.createElement(Input, {\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 38\n            }\n          }),\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 23\n          }\n        });\n      }))), /*#__PURE__*/React.createElement(FormGroup, {\n        className: \"mb-3 top-z-199\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(InputGroup, {\n        className: \"input-group-alternative\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Field, {\n        name: \"end\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 19\n        }\n      }, function (props) {\n        return /*#__PURE__*/React.createElement(DatePicker, {\n          name: props.input.name,\n          value: props.input.value,\n          onChange: props.input.onChange,\n          selected: props.input.value,\n          dateFormat: \"dd-MM-yyyy\",\n          minDate: addDays(new Date(moment().format('MMM DD, YYYYY')), 0),\n          customInput: /*#__PURE__*/React.createElement(Input, {\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 38\n            }\n          }),\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 23\n          }\n        });\n      }))))), /*#__PURE__*/React.createElement(Row, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Field, {\n        name: \"position\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 15\n        }\n      }, function (props) {\n        return /*#__PURE__*/React.createElement(MapInput, {\n          name: props.input.name,\n          value: props.input.value,\n          onChange: props.input.onChange,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 19\n          }\n        });\n      }))), /*#__PURE__*/React.createElement(Row, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"float-right\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        color: \"default\",\n        onClick: function onClick() {\n          form.reset();\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 17\n        }\n      }, \"\\u0421\\u0431\\u0440\\u043E\\u0441\\u0438\\u0442\\u044C\"), /*#__PURE__*/React.createElement(Button, {\n        color: \"primary\" //  disabled={editingLogId == null ? null : \"disabled\"}\n        ,\n        onClick: function onClick() {\n          handleSubmit(values);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 17\n        }\n      }, \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\")))));\n    }\n  }, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 5\n    }\n  }));\n}\n\n__signature__(LogForm, \"useMutation{[logMut, logMutRes]}\", function () {\n  return [useMutation];\n});\n\nvar _default = LogForm;\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(LogForm, \"LogForm\", \"/home/ubuntu/projects/dashboard-template/src/features/logs/LogForm.js\");\n  reactHotLoader.register(_default, \"default\", \"/home/ubuntu/projects/dashboard-template/src/features/logs/LogForm.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/home/ubuntu/projects/dashboard-template/src/features/logs/LogForm.js"],"names":["React","useEffect","useState","Field","Form","Button","Col","FormGroup","Input","InputGroup","InputGroupAddon","InputGroupText","Row","moment","addDays","DatePicker","MapInput","useMutation","useQuery","createLog","LogForm","editingLogId","user","log","logdata","newLogToggle","props","onSuccess","refetch","logMut","logMutRes","onSubmit","data","temp","date","format","command","id","start","Date","end","position","name","pos","lat","lng","handleSubmit","submitError","values","form","input","value","onChange","reset"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { Field, Form } from 'react-final-form'\nimport { Button, Col, FormGroup, Input, InputGroup, InputGroupAddon, InputGroupText, Row } from 'reactstrap'\nimport moment from 'moment'\nimport { addDays } from 'date-fns';\nimport DatePicker from \"react-datepicker\";\nimport MapInput from '../../extrafunc/MapInput';\nimport { useMutation, useQuery } from 'react-query';\nimport { createLog } from './query'\n\nfunction LogForm({ editingLogId, user, log, logdata, newLogToggle, ...props }) {\n\n  const [logMut, logMutRes] = useMutation(createLog, {\n    onSuccess: () => {\n      logdata.refetch()\n    }\n  })\n\n  const onSubmit = (data) => {\n    let temp = { ...data }\n    temp.date = moment().format(\"YYYY-MM-DD\")\n    temp.command = user.command.id\n\n    logMut(temp)\n    // console.log(temp);\n    // console.log(repMutRes);\n    newLogToggle()\n  }\n  return (\n    <Form\n      onSubmit={onSubmit}\n      initialValues={{\n        ...log,\n        start: new Date(),\n        end: new Date(),\n        position: log && log.position || { name: null, pos: { lat: null, lng: null } }\n      }}\n      render={({ handleSubmit, submitError, values, form }) => (\n        <form onSubmit={handleSubmit} className=\"form\">\n          {submitError && <div className=\"text-red text-center\">{submitError}</div>}\n          <Row>\n            <Col>\n              <FormGroup className=\"mb-3\">\n                <InputGroup className=\"input-group-alternative\">\n                  <Field name=\"head\">\n                    {props => (\n                      <Input placeholder=\"Старший группы\" type=\"text\"\n                        name={props.input.name}\n                        value={props.input.value}\n                        onChange={props.input.onChange}\n                      />\n                    )}\n                  </Field>\n                </InputGroup>\n              </FormGroup>\n\n              <FormGroup className=\"mb-3\">\n                <InputGroup className=\"input-group-alternative\">\n                  <Field name=\"count_ls\">\n                    {props => (\n                      <Input placeholder=\"Количество л/с\" type=\"number\"\n                        name={props.input.name}\n                        value={props.input.value}\n                        onChange={props.input.onChange}\n                      />\n                    )}\n                  </Field>\n                </InputGroup>\n              </FormGroup>\n            </Col>\n            <Col>\n              <FormGroup className=\"mb-3\">\n                <InputGroup className=\"input-group-alternative\">\n                  <Field name=\"start\">\n                    {props => (\n                      <DatePicker\n                        name={props.input.name}\n                        value={props.input.value}\n                        onChange={props.input.onChange}\n                        selected={props.input.value}\n                        dateFormat=\"dd-MM-yyyy\"\n                        minDate={addDays(new Date(moment().format('MMM DD, YYYYY')), 0)}\n                        customInput={<Input />}\n                      />\n                    )}\n                  </Field>\n                </InputGroup>\n              </FormGroup>\n\n              <FormGroup className=\"mb-3 top-z-199\">\n                <InputGroup className=\"input-group-alternative\">\n                  <Field name=\"end\">\n                    {props => (\n                      <DatePicker\n                        name={props.input.name}\n                        value={props.input.value}\n                        onChange={props.input.onChange}\n                        selected={props.input.value}\n                        dateFormat=\"dd-MM-yyyy\"\n                        minDate={addDays(new Date(moment().format('MMM DD, YYYYY')), 0)}\n                        customInput={<Input />}\n                      />\n                    )}\n                  </Field>\n                </InputGroup>\n              </FormGroup>\n\n            </Col>\n          </Row>\n          <Row>\n            <Col>\n              <Field name=\"position\">\n                {props => (\n                  <MapInput\n                    name={props.input.name}\n                    value={props.input.value}\n                    onChange={props.input.onChange} />\n                )}\n              </Field>\n            </Col>\n          </Row>\n          <Row>\n            <Col>\n              <div className=\"float-right\">\n                <Button color=\"default\" onClick={() => { form.reset() }}>Сбросить</Button>\n                <Button color=\"primary\"\n                  //  disabled={editingLogId == null ? null : \"disabled\"}\n                  onClick={() => { handleSubmit(values) }}>Сохранить</Button>\n              </div>\n            </Col>\n          </Row>\n        </form>)}\n      {...props}\n    />\n  )\n}\n\nexport default LogForm\n"]},"metadata":{},"sourceType":"module"}