{"ast":null,"code":"import _regeneratorRuntime from \"/home/ubuntu/projects/mynetwork/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _defineProperty from \"/home/ubuntu/projects/mynetwork/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"/home/ubuntu/projects/mynetwork/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/ubuntu/projects/mynetwork/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/ubuntu/projects/mynetwork/src/features/otryad/views/examples/Login.js\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nimport React, { useEffect } from \"react\";\nimport { Form, Field } from 'react-final-form';\nimport { useMutation } from 'react-query';\nimport { loginAction } from '../../query'; // reactstrap components\n\nimport { Button, Card, CardHeader, CardBody, FormGroup // Form,\n, Input, InputGroupAddon, InputGroupText, InputGroup, Row, Col } from \"reactstrap\";\nimport { withRouter } from \"react-router-dom\";\nimport { isValidEmail } from \"../../extrafunc\";\nimport { FORM_ERROR } from \"final-form\";\n\nvar Login = function Login(_ref) {\n  var history = _ref.history;\n  // localStorage.removeItem('jwt')\n  useEffect(function () {\n    document.title = 'Network - Signin';\n    localStorage.removeItem('jwt');\n    localStorage.removeItem('user');\n  }, []);\n\n  var _useMutation = useMutation(loginAction),\n      _useMutation2 = _slicedToArray(_useMutation, 2),\n      loginMut = _useMutation2[0],\n      login = _useMutation2[1];\n\n  var onSubmit = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(data) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return loginMut(data);\n\n            case 2:\n              res = _context.sent;\n\n              if (res) {\n                if (!window.location.origin.includes('localhost')) {// await notifyMut();\n                }\n\n                history.push('/otryad/index');\n              }\n\n              if (res) {\n                _context.next = 9;\n                break;\n              }\n\n              console.log(res, \"flag\");\n              return _context.abrupt(\"return\", _defineProperty({}, FORM_ERROR, 'Email or password incorrect'));\n\n            case 9:\n              if (data.remember) {\n                localStorage.setItem('remember_me', JSON.stringify(data.remember));\n              } else {\n                localStorage.removeItem('remember_me');\n              }\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function onSubmit(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var validate = function validate(val) {\n    var err = {};\n\n    if (!val.email) {\n      err.email = 'Required';\n    }\n\n    if (!isValidEmail(val.email)) {\n      err.email = 'Invalid e-mail address';\n    }\n\n    if (!val.password) {\n      err.password = 'Required';\n    }\n\n    return err;\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Col, {\n    lg: \"5\",\n    md: \"7\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    className: \"bg-secondary shadow border-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CardHeader, {\n    className: \"bg-transparent pb-5\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-muted text-center mt-2 mb-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"small\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 15\n    }\n  }, \"Sign in with\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"btn-wrapper text-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: \"btn-neutral btn-icon\",\n    color: \"default\",\n    href: \"#pablo\",\n    onClick: function onClick(e) {\n      return e.preventDefault();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"btn-inner--icon\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    alt: \"...\",\n    src: require(\"../../assets/img/icons/common/github.svg\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"btn-inner--text\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 17\n    }\n  }, \"Github\")), /*#__PURE__*/React.createElement(Button, {\n    className: \"btn-neutral btn-icon\",\n    color: \"default\",\n    href: \"#pablo\",\n    onClick: function onClick(e) {\n      return e.preventDefault();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"btn-inner--icon\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    alt: \"...\",\n    src: require(\"../../assets/img/icons/common/google.svg\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"btn-inner--text\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 17\n    }\n  }, \"Google\")))), /*#__PURE__*/React.createElement(CardBody, {\n    className: \"px-lg-5 py-lg-5\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-center text-muted mb-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"small\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 15\n    }\n  }, \"Or sign in with credentials\")), /*#__PURE__*/React.createElement(Form, {\n    onSubmit: onSubmit,\n    validate: validate,\n    initialValues: {// email: \"asd@asd.ads\",\n      // password: \"ads\",\n    },\n    render: function render(_ref4) {\n      var handleSubmit = _ref4.handleSubmit,\n          submitError = _ref4.submitError,\n          values = _ref4.values;\n      return /*#__PURE__*/React.createElement(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"form\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 17\n        }\n      }, submitError && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-red text-center\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 35\n        }\n      }, submitError), /*#__PURE__*/React.createElement(FormGroup, {\n        className: \"mb-3\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(InputGroup, {\n        className: \"input-group-alternative\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(InputGroupAddon, {\n        addonType: \"prepend\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(InputGroupText, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"ni ni-email-83\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 27\n        }\n      }))), /*#__PURE__*/React.createElement(Field, {\n        name: \"email\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 23\n        }\n      }, function (props) {\n        return /*#__PURE__*/React.createElement(Input, {\n          placeholder: \"Email\",\n          type: \"email\",\n          autoComplete: \"new-email\",\n          name: props.input.name,\n          value: props.input.value,\n          onChange: props.input.onChange,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 27\n          }\n        });\n      }))), /*#__PURE__*/React.createElement(FormGroup, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(InputGroup, {\n        className: \"input-group-alternative\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(InputGroupAddon, {\n        addonType: \"prepend\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(InputGroupText, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"ni ni-lock-circle-open\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 27\n        }\n      }))), /*#__PURE__*/React.createElement(Field, {\n        name: \"password\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 23\n        }\n      }, function (props) {\n        return /*#__PURE__*/React.createElement(Input, {\n          placeholder: \"Password\",\n          type: \"password\",\n          autoComplete: \"new-password\",\n          name: props.input.name,\n          value: props.input.value,\n          onChange: props.input.onChange,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 27\n          }\n        });\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-control custom-control-alternative custom-checkbox\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Field, {\n        name: \"remember\",\n        type: \"checkbox\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 21\n        }\n      }, function (props) {\n        var _React$createElement;\n\n        return /*#__PURE__*/React.createElement(\"input\", (_React$createElement = {\n          onChange: props.input.onChange,\n          className: \"custom-control-input\",\n          id: \" customCheckLogin\",\n          type: \"checkbox\",\n          name: props.input.name,\n          value: props.input.value\n        }, _defineProperty(_React$createElement, \"onChange\", props.input.onChange), _defineProperty(_React$createElement, \"__self\", _this), _defineProperty(_React$createElement, \"__source\", {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 25\n        }), _React$createElement));\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        className: \"custom-control-label\",\n        htmlFor: \" customCheckLogin\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"text-muted\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 23\n        }\n      }, \"Remember me\"))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-center\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        className: \"my-4\",\n        color: \"primary\",\n        type: \"button\",\n        onClick: function onClick() {\n          return handleSubmit(values);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 21\n        }\n      }, \"Sign in\")));\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(Row, {\n    className: \"mt-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    xs: \"6\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    className: \"text-light\",\n    href: \"#pablo\",\n    onClick: function onClick(e) {\n      return e.preventDefault();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"small\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 15\n    }\n  }, \"Forgot password?\"))), /*#__PURE__*/React.createElement(Col, {\n    className: \"text-right\",\n    xs: \"6\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    className: \"text-light\",\n    href: \"#pablo\",\n    onClick: function onClick(e) {\n      return e.preventDefault();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"small\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 15\n    }\n  }, \"Create new account\"))))));\n};\n\n__signature__(Login, \"useEffect{}\\nuseMutation{[loginMut, login]}\", function () {\n  return [useMutation];\n});\n\nvar _default = withRouter(Login);\n\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(Login, \"Login\", \"/home/ubuntu/projects/mynetwork/src/features/otryad/views/examples/Login.js\");\n  reactHotLoader.register(_default, \"default\", \"/home/ubuntu/projects/mynetwork/src/features/otryad/views/examples/Login.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/home/ubuntu/projects/mynetwork/src/features/otryad/views/examples/Login.js"],"names":["React","useEffect","Form","Field","useMutation","loginAction","Button","Card","CardHeader","CardBody","FormGroup","Input","InputGroupAddon","InputGroupText","InputGroup","Row","Col","withRouter","isValidEmail","FORM_ERROR","Login","history","document","title","localStorage","removeItem","loginMut","login","onSubmit","data","res","window","location","origin","includes","push","console","log","remember","setItem","JSON","stringify","validate","val","err","email","password","e","preventDefault","require","handleSubmit","submitError","values","props","input","name","value","onChange"],"mappings":"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","sourcesContent":["\r\nimport React, { useEffect } from \"react\";\r\nimport { Form, Field } from 'react-final-form'\r\n\r\nimport { useMutation } from 'react-query';\r\nimport { loginAction } from '../../query';\r\n\r\n// reactstrap components\r\nimport {\r\n  Button,\r\n  Card,\r\n  CardHeader,\r\n  CardBody,\r\n  FormGroup,\r\n  // Form,\r\n  Input,\r\n  InputGroupAddon,\r\n  InputGroupText,\r\n  InputGroup,\r\n  Row,\r\n  Col\r\n} from \"reactstrap\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { isValidEmail } from \"../../extrafunc\";\r\nimport { FORM_ERROR } from \"final-form\";\r\n\r\nconst Login = ({ history }) => {\r\n\r\n  // localStorage.removeItem('jwt')\r\n  useEffect(() => {\r\n    document.title = 'Network - Signin';\r\n    localStorage.removeItem('jwt')\r\n    localStorage.removeItem('user')\r\n }, [])\r\n\r\n  const [loginMut, login] = useMutation(loginAction);\r\n\r\n  const onSubmit = async (data) => {\r\n    const res = await loginMut(data);\r\n    if (res) {\r\n      if (!window.location.origin.includes('localhost')) {\r\n        // await notifyMut();\r\n      }\r\n      history.push('/otryad/index');\r\n    }\r\n    if (!res) {\r\n      console.log(res, \"flag\")\r\n      return {\r\n        [FORM_ERROR]: 'Email or password incorrect'\r\n      }\r\n    } else if (data.remember) {\r\n      localStorage.setItem('remember_me', JSON.stringify(data.remember));\r\n    } else { localStorage.removeItem('remember_me') }\r\n  }\r\n\r\n  const validate = (val) => {\r\n    const err = {}\r\n    if (!val.email) { err.email = 'Required' }\r\n    if (!isValidEmail(val.email)) { err.email = 'Invalid e-mail address' }\r\n    if (!val.password) { err.password = 'Required' }\r\n    return err\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Col lg=\"5\" md=\"7\">\r\n        <Card className=\"bg-secondary shadow border-0\">\r\n          <CardHeader className=\"bg-transparent pb-5\">\r\n            <div className=\"text-muted text-center mt-2 mb-3\">\r\n              <small>Sign in with</small>\r\n            </div>\r\n            <div className=\"btn-wrapper text-center\">\r\n              <Button\r\n                className=\"btn-neutral btn-icon\"\r\n                color=\"default\"\r\n                href=\"#pablo\"\r\n                onClick={e => e.preventDefault()}\r\n              >\r\n                <span className=\"btn-inner--icon\">\r\n                  <img\r\n                    alt=\"...\"\r\n                    src={require(\"../../assets/img/icons/common/github.svg\")}\r\n                  />\r\n                </span>\r\n                <span className=\"btn-inner--text\">Github</span>\r\n              </Button>\r\n              <Button\r\n                className=\"btn-neutral btn-icon\"\r\n                color=\"default\"\r\n                href=\"#pablo\"\r\n                onClick={e => e.preventDefault()}\r\n              >\r\n                <span className=\"btn-inner--icon\">\r\n                  <img\r\n                    alt=\"...\"\r\n                    src={require(\"../../assets/img/icons/common/google.svg\")}\r\n                  />\r\n                </span>\r\n                <span className=\"btn-inner--text\">Google</span>\r\n              </Button>\r\n            </div>\r\n          </CardHeader>\r\n          <CardBody className=\"px-lg-5 py-lg-5\">\r\n            <div className=\"text-center text-muted mb-4\">\r\n              <small>Or sign in with credentials</small>\r\n            </div>\r\n            <Form\r\n              onSubmit={onSubmit}\r\n              validate={validate}\r\n              initialValues={{\r\n                // email: \"asd@asd.ads\",\r\n                // password: \"ads\",\r\n              }}\r\n              render={({ handleSubmit, submitError, values }) => (\r\n                <form onSubmit={handleSubmit} className=\"form\">\r\n                  {submitError && <div className=\"text-red text-center\">{submitError}</div>}\r\n                  <FormGroup className=\"mb-3\">\r\n                    <InputGroup className=\"input-group-alternative\">\r\n                      <InputGroupAddon addonType=\"prepend\">\r\n                        <InputGroupText>\r\n                          <i className=\"ni ni-email-83\" />\r\n                        </InputGroupText>\r\n                      </InputGroupAddon>\r\n                      <Field name=\"email\">\r\n                        {props => (\r\n                          <Input placeholder=\"Email\" type=\"email\" autoComplete=\"new-email\"\r\n                            name={props.input.name}\r\n                            value={props.input.value}\r\n                            onChange={props.input.onChange}\r\n                          />\r\n                        )}\r\n                      </Field>\r\n                    </InputGroup>\r\n                  </FormGroup>\r\n                  <FormGroup>\r\n                    <InputGroup className=\"input-group-alternative\">\r\n                      <InputGroupAddon addonType=\"prepend\">\r\n                        <InputGroupText>\r\n                          <i className=\"ni ni-lock-circle-open\" />\r\n                        </InputGroupText>\r\n                      </InputGroupAddon>\r\n                      <Field name=\"password\">\r\n                        {props => (\r\n                          <Input placeholder=\"Password\" type=\"password\" autoComplete=\"new-password\"\r\n                            name={props.input.name}\r\n                            value={props.input.value}\r\n                            onChange={props.input.onChange}\r\n                          />\r\n                        )}\r\n                      </Field>\r\n                    </InputGroup>\r\n                  </FormGroup>\r\n                  <div className=\"custom-control custom-control-alternative custom-checkbox\">\r\n                    <Field name=\"remember\" type=\"checkbox\">\r\n                      {props => (\r\n                        <input\r\n                          onChange={props.input.onChange}\r\n                          className=\"custom-control-input\"\r\n                          id=\" customCheckLogin\"\r\n                          type=\"checkbox\"\r\n                          name={props.input.name}\r\n                          value={props.input.value}\r\n                          onChange={props.input.onChange}\r\n                        />)}\r\n                    </Field>\r\n                    <label\r\n                      className=\"custom-control-label\"\r\n                      htmlFor=\" customCheckLogin\"\r\n                    >\r\n                      <span className=\"text-muted\">Remember me</span>\r\n                    </label>\r\n                  </div>\r\n                  <div className=\"text-center\">\r\n                    <Button className=\"my-4\" color=\"primary\" type=\"button\" onClick={() => handleSubmit(values)}>\r\n                      Sign in\r\n                  </Button>\r\n                  </div>\r\n                </form>\r\n              )}\r\n            />\r\n          </CardBody>\r\n        </Card>\r\n        <Row className=\"mt-3\">\r\n          <Col xs=\"6\">\r\n            <a\r\n              className=\"text-light\"\r\n              href=\"#pablo\"\r\n              onClick={e => e.preventDefault()}\r\n            >\r\n              <small>Forgot password?</small>\r\n            </a>\r\n          </Col>\r\n          <Col className=\"text-right\" xs=\"6\">\r\n            <a\r\n              className=\"text-light\"\r\n              href=\"#pablo\"\r\n              onClick={e => e.preventDefault()}\r\n            >\r\n              <small>Create new account</small>\r\n            </a>\r\n          </Col>\r\n        </Row>\r\n      </Col>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default withRouter(Login);\r\n"]},"metadata":{},"sourceType":"module"}