{"ast":null,"code":"import _regeneratorRuntime from \"/home/ubuntu/projects/mynetwork/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/ubuntu/projects/mynetwork/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nimport { strapi } from \"../../axios\";\nexport var getSrcByGq = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var query, data;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            query = \"\\n    query {\\n        srcObjects{\\n          id\\n          name\\n        }\\n      }               \\n    \";\n            _context.next = 3;\n            return strapi.request(\"POST\", \"/graphql\", {\n              data: {\n                query: query\n              }\n            });\n\n          case 3:\n            data = _context.sent;\n            return _context.abrupt(\"return\", data.data);\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function getSrcByGq() {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport var getDeviceByGq = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    var query, data;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            query = \"\\n    query {\\n        devices{\\n          id\\n          name\\n        }\\n      }               \\n    \";\n            _context2.next = 3;\n            return strapi.request(\"POST\", \"/graphql\", {\n              data: {\n                query: query\n              }\n            });\n\n          case 3:\n            data = _context2.sent;\n            return _context2.abrupt(\"return\", data.data);\n\n          case 5:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function getDeviceByGq() {\n    return _ref2.apply(this, arguments);\n  };\n}();\nexport var getUtilsByGq = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n    var query, data;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            query = \"\\n    query {\\n        srcObjects(sort:\\\"id:asc\\\"){\\n          id\\n          name\\n        }\\n        devices(sort:\\\"id:asc\\\"){\\n          id\\n          name\\n        }\\n        records(sort:\\\"id:asc\\\"){\\n          id\\n          count\\n          src_object{\\n            id\\n          }\\n          device{\\n            id\\n          }\\n        }\\n      }             \\n    \";\n            _context3.next = 3;\n            return strapi.request(\"POST\", \"/graphql\", {\n              data: {\n                query: query\n              }\n            });\n\n          case 3:\n            data = _context3.sent;\n            return _context3.abrupt(\"return\", data.data);\n\n          case 5:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n\n  return function getUtilsByGq() {\n    return _ref3.apply(this, arguments);\n  };\n}();\nexport var createRecord = /*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(_ref4) {\n    var data, records, tempData, tempRecords;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            data = _ref4.data, records = _ref4.records;\n            console.log(data.records);\n            console.log(records);\n            tempData = [];\n            data.records.map(function (item) {\n              return tempData.push(item.id);\n            });\n            tempRecords = [];\n            records.map(function (item) {\n              return tempRecords.push(item.id);\n            });\n            tempRecords.map(function (item, key) {\n              if (!tempData.includes(item)) strapi.deleteEntry('records', item);\n            });\n            data.records.map(function (item, key) {\n              if (item.id) strapi.updateEntry('records', item.id, item);else strapi.createEntry('records', item);\n            }); // const data = await strapi.updateEntry('records', records)\n            // return data\n\n          case 9:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n\n  return function createRecord(_x) {\n    return _ref5.apply(this, arguments);\n  };\n}();\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(getSrcByGq, \"getSrcByGq\", \"/home/ubuntu/projects/mynetwork/src/features/operations/query.js\");\n  reactHotLoader.register(getDeviceByGq, \"getDeviceByGq\", \"/home/ubuntu/projects/mynetwork/src/features/operations/query.js\");\n  reactHotLoader.register(getUtilsByGq, \"getUtilsByGq\", \"/home/ubuntu/projects/mynetwork/src/features/operations/query.js\");\n  reactHotLoader.register(createRecord, \"createRecord\", \"/home/ubuntu/projects/mynetwork/src/features/operations/query.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/home/ubuntu/projects/mynetwork/src/features/operations/query.js"],"names":["strapi","getSrcByGq","query","request","data","getDeviceByGq","getUtilsByGq","createRecord","records","console","log","tempData","map","item","push","id","tempRecords","key","includes","deleteEntry","updateEntry","createEntry"],"mappings":";;;;;;;;;;;;AAAA,SAASA,MAAT,QAAuB,aAAvB;AAEA,OAAO,IAAMC,UAAU;AAAA,sEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAClBC,YAAAA,KADkB;AAAA;AAAA,mBASLF,MAAM,CAACG,OAAP,CAAe,MAAf,EAAuB,UAAvB,EAAmC;AACpDC,cAAAA,IAAI,EAAE;AACJF,gBAAAA,KAAK,EAAEA;AADH;AAD8C,aAAnC,CATK;;AAAA;AASlBE,YAAAA,IATkB;AAAA,6CAcjBA,IAAI,CAACA,IAdY;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAVH,UAAU;AAAA;AAAA;AAAA,GAAhB;AAiBP,OAAO,IAAMI,aAAa;AAAA,uEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AACrBH,YAAAA,KADqB;AAAA;AAAA,mBASRF,MAAM,CAACG,OAAP,CAAe,MAAf,EAAuB,UAAvB,EAAmC;AACpDC,cAAAA,IAAI,EAAE;AACJF,gBAAAA,KAAK,EAAEA;AADH;AAD8C,aAAnC,CATQ;;AAAA;AASrBE,YAAAA,IATqB;AAAA,8CAcpBA,IAAI,CAACA,IAde;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAbC,aAAa;AAAA;AAAA;AAAA,GAAnB;AAkBP,OAAO,IAAMC,YAAY;AAAA,uEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AACpBJ,YAAAA,KADoB;AAAA;AAAA,mBAuBPF,MAAM,CAACG,OAAP,CAAe,MAAf,EAAuB,UAAvB,EAAmC;AACpDC,cAAAA,IAAI,EAAE;AACJF,gBAAAA,KAAK,EAAEA;AADH;AAD8C,aAAnC,CAvBO;;AAAA;AAuBpBE,YAAAA,IAvBoB;AAAA,8CA4BnBA,IAAI,CAACA,IA5Bc;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAZE,YAAY;AAAA;AAAA;AAAA,GAAlB;AA+BP,OAAO,IAAMC,YAAY;AAAA,uEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAASH,YAAAA,IAAT,SAASA,IAAT,EAAeI,OAAf,SAAeA,OAAf;AAC1BC,YAAAA,OAAO,CAACC,GAAR,CAAYN,IAAI,CAACI,OAAjB;AACAC,YAAAA,OAAO,CAACC,GAAR,CAAYF,OAAZ;AACIG,YAAAA,QAHsB,GAGX,EAHW;AAI1BP,YAAAA,IAAI,CAACI,OAAL,CAAaI,GAAb,CAAiB,UAAAC,IAAI;AAAA,qBAAIF,QAAQ,CAACG,IAAT,CAAcD,IAAI,CAACE,EAAnB,CAAJ;AAAA,aAArB;AACIC,YAAAA,WALsB,GAKR,EALQ;AAM1BR,YAAAA,OAAO,CAACI,GAAR,CAAY,UAAAC,IAAI;AAAA,qBAAIG,WAAW,CAACF,IAAZ,CAAiBD,IAAI,CAACE,EAAtB,CAAJ;AAAA,aAAhB;AAEAC,YAAAA,WAAW,CAACJ,GAAZ,CAAgB,UAACC,IAAD,EAAOI,GAAP,EAAe;AAC7B,kBAAI,CAACN,QAAQ,CAACO,QAAT,CAAkBL,IAAlB,CAAL,EAA8Bb,MAAM,CAACmB,WAAP,CAAmB,SAAnB,EAA8BN,IAA9B;AAC/B,aAFD;AAIAT,YAAAA,IAAI,CAACI,OAAL,CAAaI,GAAb,CAAiB,UAACC,IAAD,EAAOI,GAAP,EAAe;AAC9B,kBAAIJ,IAAI,CAACE,EAAT,EAAaf,MAAM,CAACoB,WAAP,CAAmB,SAAnB,EAA8BP,IAAI,CAACE,EAAnC,EAAuCF,IAAvC,EAAb,KACKb,MAAM,CAACqB,WAAP,CAAmB,SAAnB,EAA8BR,IAA9B;AACN,aAHD,EAZ0B,CAiB1B;AACA;;AAlB0B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAZN,YAAY;AAAA;AAAA;AAAA,GAAlB;;;;;;;;;;0BAlEMN,U;0BAiBAI,a;0BAkBAC,Y;0BA+BAC,Y","sourcesContent":["import { strapi } from \"../../axios\";\r\n\r\nexport const getSrcByGq = async () => {\r\n  const query = `\r\n    query {\r\n        srcObjects{\r\n          id\r\n          name\r\n        }\r\n      }               \r\n    `\r\n  const data = await strapi.request(\"POST\", \"/graphql\", {\r\n    data: {\r\n      query: query\r\n    }\r\n  })\r\n  return data.data;\r\n}\r\n\r\nexport const getDeviceByGq = async () => {\r\n  const query = `\r\n    query {\r\n        devices{\r\n          id\r\n          name\r\n        }\r\n      }               \r\n    `\r\n  const data = await strapi.request(\"POST\", \"/graphql\", {\r\n    data: {\r\n      query: query\r\n    }\r\n  })\r\n  return data.data;\r\n}\r\n\r\n\r\nexport const getUtilsByGq = async () => {\r\n  const query = `\r\n    query {\r\n        srcObjects(sort:\"id:asc\"){\r\n          id\r\n          name\r\n        }\r\n        devices(sort:\"id:asc\"){\r\n          id\r\n          name\r\n        }\r\n        records(sort:\"id:asc\"){\r\n          id\r\n          count\r\n          src_object{\r\n            id\r\n          }\r\n          device{\r\n            id\r\n          }\r\n        }\r\n      }             \r\n    `\r\n  const data = await strapi.request(\"POST\", \"/graphql\", {\r\n    data: {\r\n      query: query\r\n    }\r\n  })\r\n  return data.data;\r\n}\r\n\r\nexport const createRecord = async ({ data, records }) => {\r\n  console.log(data.records);\r\n  console.log(records);\r\n  let tempData = []\r\n  data.records.map(item => tempData.push(item.id))\r\n  let tempRecords = []\r\n  records.map(item => tempRecords.push(item.id))\r\n\r\n  tempRecords.map((item, key) => {\r\n    if (!tempData.includes(item)) strapi.deleteEntry('records', item)\r\n  })\r\n\r\n  data.records.map((item, key) => {\r\n    if (item.id) strapi.updateEntry('records', item.id, item)\r\n    else strapi.createEntry('records', item)\r\n  })\r\n\r\n  // const data = await strapi.updateEntry('records', records)\r\n  // return data\r\n}\r\n"]},"metadata":{},"sourceType":"module"}